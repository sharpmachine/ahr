/*
 * ColorBox v1.3.6 - a full featured, light-weight, customizable lightbox based on jQuery 1.3
 * Copyright ?? 2009 Jack Moore - www.colorpowered.com - jack@colorpowered.com
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
(function(A,M){var B={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true},t="colorbox",J="cbox",L=J+"_open",e=J+"_load",K=J+"_complete",q=J+"_cleanup",R=J+"_closed",w="resize."+J,r=A.browser.msie&&!A.support.opacity,U=r&&A.browser.version<7,Q=J+"_IE6",H,V,W,d,y,m,b,G,c,P,D,i,h,l,p,N,o,I,u,X,k,g,a,s,j,z,S,x,O,C,n=J+"Element";function F(Z,Y){Z=Z?' id="'+J+Z+'"':"";Y=Y?' style="'+Y+'"':"";return A("<div"+Z+Y+"/>")}function E(Y,Z){Z=Z==="x"?P.width():P.height();return(typeof Y==="string")?Math.round((Y.match(/%/)?(Z/100)*parseInt(Y,10):parseInt(Y,10))):Y}function v(Y){Y=A.isFunction(Y)?Y.call(s):Y;return S.photo||Y.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function T(){for(var Y in S){if(A.isFunction(S[Y])&&Y.substring(0,2)!=="on"){S[Y]=S[Y].call(s)}}S.rel=S.rel||s.rel||"nofollow";S.href=S.href||A(s).attr("href");S.title=S.title||s.title}function f(Y){s=Y;S=A.extend({},A(s).data(t));T();if(S.rel!=="nofollow"){c=A("."+n).filter(function(){var aa=A(this).data(t).rel||this.rel;return(aa===S.rel)});z=c.index(s);if(z===-1){c=c.add(s);z=c.length-1}}else{c=A(s);z=0}if(!x){x=O=true;j=s;try{j.blur()}catch(Z){}A.event.trigger(L);if(S.onOpen){S.onOpen.call(s)}H.css({opacity:+S.opacity,cursor:S.overlayClose?"pointer":"auto"}).show();S.w=E(S.initialWidth,"x");S.h=E(S.initialHeight,"y");C.position(0);if(U){P.bind("resize."+Q+" scroll."+Q,function(){H.css({width:P.width(),height:P.height(),top:P.scrollTop(),left:P.scrollLeft()})}).trigger("scroll."+Q)}}p.add(I).add(o).add(N).add(l).hide();u.html(S.close).show();C.slideshow();C.load()}C=A.fn[t]=A[t]=function(Y,aa){var Z=this;if(!Z[0]&&Z.selector){return Z}Y=Y||{};if(aa){Y.onComplete=aa}if(!Z[0]||Z.selector===undefined){Z=A("<a/>");Y.open=true}Z.each(function(){A(this).data(t,A.extend({},A(this).data(t)||B,Y)).addClass(n)});if(Y.open){f(Z[0])}return Z};C.init=function(){P=A(M);V=F().attr({id:t,"class":r?J+"IE":""});H=F("Overlay",U?"position:absolute":"").hide();W=F("Wrapper");d=F("Content").append(D=F("LoadedContent","width:0; height:0"),h=F("LoadingOverlay").add(F("LoadingGraphic")),l=F("Title"),p=F("Current"),o=F("Next"),I=F("Previous"),N=F("Slideshow"),u=F("Close"));W.append(F().append(F("TopLeft"),y=F("TopCenter"),F("TopRight")),F().append(m=F("MiddleLeft"),d,b=F("MiddleRight")),F().append(F("BottomLeft"),G=F("BottomCenter"),F("BottomRight"))).children().children().css({"float":"left"});i=F(false,"position:absolute; width:9999px; visibility:hidden; display:none");A("body").prepend(H,V.append(W,i));d.children().hover(function(){A(this).addClass("hover")},function(){A(this).removeClass("hover")}).addClass("hover");X=y.height()+G.height()+d.outerHeight(true)-d.height();k=m.width()+b.width()+d.outerWidth(true)-d.width();g=D.outerHeight(true);a=D.outerWidth(true);V.css({"padding-bottom":X,"padding-right":k}).hide();o.click(C.next);I.click(C.prev);u.click(C.close);d.children().removeClass("hover");A("."+n).live("click",function(Y){if((Y.button!==0&&typeof Y.button!=="undefined")||Y.ctrlKey||Y.shiftKey||Y.altKey){return true}else{f(this);return false}});H.click(function(){if(S.overlayClose){C.close()}});A(document).bind("keydown",function(Y){if(x&&S.escKey&&Y.keyCode===27){Y.preventDefault();C.close()}if(x&&S.arrowKey&&!O&&c[1]){if(Y.keyCode===37&&(z||S.loop)){Y.preventDefault();I.click()}else{if(Y.keyCode===39&&(z<c.length-1||S.loop)){Y.preventDefault();o.click()}}}})};C.remove=function(){V.add(H).remove();A("."+n).die("click").removeData(t).removeClass(n)};C.position=function(ac,Z){var ab,aa=Math.max(P.height()-S.h-g-X,0)/2+P.scrollTop(),Y=Math.max(P.width()-S.w-a-k,0)/2+P.scrollLeft();ab=(V.width()===S.w+a&&V.height()===S.h+g)?0:ac;W[0].style.width=W[0].style.height="9999px";function ad(ae){y[0].style.width=G[0].style.width=d[0].style.width=ae.style.width;h[0].style.height=h[1].style.height=d[0].style.height=m[0].style.height=b[0].style.height=ae.style.height}V.dequeue().animate({width:S.w+a,height:S.h+g,top:aa,left:Y},{duration:ab,complete:function(){ad(this);O=false;W[0].style.width=(S.w+a+k)+"px";W[0].style.height=(S.h+g+X)+"px";if(Z){Z()}},step:function(){ad(this)}})};C.resize=function(Y){if(x){Y=Y||{};if(Y.width){S.w=E(Y.width,"x")-a-k}if(Y.innerWidth){S.w=E(Y.innerWidth,"x")}if(Y.height){S.h=E(Y.height,"y")-g-X}if(Y.innerHeight){S.h=E(Y.innerHeight,"y")}if(!Y.width&&!Y.innerWidth&&!Y.innerHeight&&!Y.height){var Z=D.wrapInner("<div style='overflow:auto'></div>").children();S.w=Z.width();S.h=Z.height()}D.css({width:S.w,height:S.h});Z.children().appendTo(D);Z.remove();C.position(S.transition==="none"?0:S.speed)}};C.prep=function(ab){if(!x){return}var aa,ac=S.transition==="none"?0:S.speed;P.unbind("resize."+J);D.remove();D=F("LoadedContent").html(ab);function Y(){S.w=S.w||D.width();S.w=S.mw&&S.mw<S.w?S.mw:S.w;return S.w}function ad(){S.h=S.h||D.height();S.h=S.mh&&S.mh<S.h?S.mh:S.h;return S.h}D.hide().appendTo(i.show()).css({width:Y(),overflow:S.scrolling?"auto":"hidden"}).css({height:ad()}).prependTo(d);i.hide();A("#"+J+"Photo").css({cssFloat:"none"});if(U){A("select").not(V.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(q,function(){this.style.visibility="inherit"})}function Z(ah){var aj,ak,ag,af,ai=c.length,ae=S.loop;C.position(ah,function(){function al(){if(r){V[0].style.removeAttribute("filter")}}if(!x){return}if(r){if(aa){D.fadeIn(100)}}if(S.iframe){A("<iframe frameborder=0"+(S.scrolling?"":" scrolling='no'")+(r?" allowtransparency='true'":"")+"/>").attr({src:S.href,name:new Date().getTime()}).appendTo(D)}D.show();D.find("img").animate({opacity:1},ac);l.show().html(S.title);if(ai>1){p.html(S.current.replace(/\{current\}/,z+1).replace(/\{total\}/,ai)).show();o[(ae||z<ai-1)?"show":"hide"]().html(S.next);I[(ae||z)?"show":"hide"]().html(S.previous);aj=z?c[z-1]:c[ai-1];ag=z<ai-1?c[z+1]:c[0];if(S.slideshow){N.show();if(z===ai-1&&!ae&&V.is("."+J+"Slideshow_on")){N.click()}}if(S.preloading){af=A(ag).data(t).href||ag.href;ak=A(aj).data(t).href||aj.href;if(v(af)){A("<img/>")[0].src=af}if(v(ak)){A("<img/>")[0].src=ak}}}h.hide();if(S.transition==="fade"){V.fadeTo(ac,1,function(){al()})}else{al()}P.bind("resize."+J,function(){C.position(0)});A.event.trigger(K);if(S.onComplete){S.onComplete.call(s)}})}if(S.transition==="fade"){V.fadeTo(ac,0,function(){Z(0)})}else{Z(ac)}};C.load=function(){var aa,Z,ab,Y=C.prep;O=true;s=c[z];S=A.extend({},A(s).data(t));T();A.event.trigger(e);if(S.onLoad){S.onLoad.call(s)}S.h=S.height?E(S.height,"y")-g-X:S.innerHeight&&E(S.innerHeight,"y");S.w=S.width?E(S.width,"x")-a-k:S.innerWidth&&E(S.innerWidth,"x");S.mw=S.w;S.mh=S.h;if(S.maxWidth){S.mw=E(S.maxWidth,"x")-a-k;S.mw=S.w&&S.w<S.mw?S.w:S.mw}if(S.maxHeight){S.mh=E(S.maxHeight,"y")-g-X;S.mh=S.h&&S.h<S.mh?S.h:S.mh}aa=S.href;h.show();if(S.inline){F("InlineTemp").hide().insertBefore(A(aa)[0]).bind(e+" "+q,function(){A(this).replaceWith(D.children())});Y(A(aa))}else{if(S.iframe){Y(" ")}else{if(S.html){Y(S.html)}else{if(v(aa)){Z=new Image();Z.onload=function(){var ac;Z.onload=null;Z.id=J+"Photo";A(Z).css({margin:"auto",border:"none",display:"block",cssFloat:"left",opacity:0});if(S.scalePhotos){ab=function(){Z.height-=Z.height*ac;Z.width-=Z.width*ac};if(S.mw&&Z.width>S.mw){ac=(Z.width-S.mw)/Z.width;ab()}if(S.mh&&Z.height>S.mh){ac=(Z.height-S.mh)/Z.height;ab()}}if(S.h){Z.style.marginTop=Math.max(S.h-Z.height,0)/2+"px"}setTimeout(function(){Y(Z)},1);if(c[1]&&(z<c.length-1||S.loop)){A(Z).css({cursor:"pointer"}).click(C.next)}if(r){Z.style.msInterpolationMode="bicubic"}};Z.src=aa}else{F().appendTo(i).load(aa,function(ad,ac,ae){Y(ac==="error"?"Request unsuccessful: "+ae.statusText:this)})}}}}};C.hide=function(){x=false;A(document).unbind("keydown.cbox_close keydown.cbox_arrows");P.unbind("resize."+J+" resize.cboxie6 scroll.cboxie6");H.css({cursor:"auto"}).fadeOut("fast");D.css({position:"absolute",left:"-9999em"});V.css({opacity:1,left:"-9999em"})};C.next=function(){if(!O){z=z<c.length-1?z+1:0;C.load()}};C.prev=function(){if(!O){z=z?z-1:c.length-1;C.load()}};C.slideshow=function(){var Z,Y,aa=J+"Slideshow_";N.bind(R,function(){N.unbind();clearTimeout(Y);V.removeClass(aa+"off "+aa+"on")});function ab(){N.text(S.slideshowStop).bind(K,function(){Y=setTimeout(C.next,S.slideshowSpeed)}).bind(e,function(){clearTimeout(Y)}).one("click",function(){Z()});V.removeClass(aa+"off").addClass(aa+"on")}Z=function(){clearTimeout(Y);N.text(S.slideshowStart).unbind(K+" "+e).one("click",function(){ab();Y=setTimeout(C.next,S.slideshowSpeed)});V.removeClass(aa+"on").addClass(aa+"off")};if(S.slideshow&&c[1]){if(S.slideshowAuto){ab()}else{Z()}}};C.close=function(){if(x){x=false;A.event.trigger(q);if(S.onCleanup){S.onCleanup.call(s)}P.unbind("."+J+" ."+Q);H.fadeTo("fast",0);V.stop().fadeTo("fast",0,function(){V.find("iframe").attr("src","about:blank");D.remove();V.add(H).css({opacity:1,cursor:"auto"}).hide();try{j.focus()}catch(Y){}setTimeout(function(){A.event.trigger(R);if(S.onClosed){S.onClosed.call(s)}},1)})}};C.element=function(){return A(s)};C.settings=B;A(C.init)}(jQuery,this));